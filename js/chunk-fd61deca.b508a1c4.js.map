{"version":3,"sources":["webpack:///./src/components/pages/tickets/TicketDetails.vue?cd01","webpack:///./src/components/pages/tickets/TicketDetails.vue?fcb9","webpack:///src/components/pages/tickets/TicketDetails.vue","webpack:///./src/components/pages/tickets/TicketDetails.vue?d1e6","webpack:///./src/components/pages/tickets/TicketDetails.vue?7e8a","webpack:///./src/components/pages/tickets/TicketDetails.vue?b027"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","currentUser","currentTariff","currentTicket","messageBack","on","$event","_e","staticRenderFns","name","components","Profile","Chat","Tariff","props","data","computed","tickets","find","tariff","getUserById","resellerId","watch","console","log","val","methods","color","emiter","$vuetify","theme","themes","light","primary","sendMessage","sendMessageBack","id","historyElement","createdAt","Date","now","emitor","message","response","moveToArchive","changeStatus","component","VCol","VRow"],"mappings":"kHAAA,W,2CCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAQF,EAAU,OAAEI,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACE,YAAY,UAAUC,MAAM,CAAC,KAAO,KAAK,GAAK,MAAM,CAACH,EAAG,UAAU,CAACG,MAAM,CAAC,KAAOP,EAAIQ,eAAeJ,EAAG,SAAS,CAACG,MAAM,CAAC,cAAgBP,EAAIS,kBAAkB,GAAGL,EAAG,QAAQ,CAACE,YAAY,OAAOC,MAAM,CAAC,KAAO,KAAK,GAAK,MAAM,CAACH,EAAG,OAAO,CAACG,MAAM,CAAC,OAASP,EAAIU,cAAc,QAAUV,EAAIW,aAAaC,GAAG,CAAC,iBAAiB,SAASC,GAAQb,EAAIW,YAAYE,OAAY,IAAI,GAAGb,EAAIc,MACrfC,EAAkB,G,8CC6CtB,GACEC,KAAM,gBACNC,WAAY,CACVC,QAAS,WAAb,wDACIC,KAAM,WAAV,6FACIC,OAAQ,WAAZ,yDAEEC,MAAO,CAAC,KAAM,OAAQ,UAEtBC,KAAM,WAAR,OACA,iBAGEC,SAAU,OAAZ,OAAY,CAAZ,gDACA,gDACA,iCACA,sCAHA,IAIIb,cAJJ,WAIA,WACM,OAAOT,KAAKuB,QAAQC,MAAK,SAA/B,2BAGIhB,cARJ,WAQA,WACA,4EACM,OAAOiB,GAAU,IAGnBlB,YAbJ,WAcM,OAAOP,KAAK0B,YAAY1B,KAAKS,cAAckB,eAI/CC,MAAO,CACLlB,YADJ,SACA,GACMmB,QAAQC,IAAIC,KAIhBC,QAAS,OAAX,OAAW,CAAX,iCACA,mCACI,cAAJ,aAEA,mCACI,gBAAJ,sCALA,IAOIC,MAPJ,SAOA,GACM,MAAkB,UAAXC,EAAqB,OAASlC,KAAKmC,SAASC,MAAMC,OAAOC,MAAMC,SAExEC,YAVJ,WAUA,WACMxC,KAAKyC,gBAAgB,CACnBC,GAAI1C,KAAK0C,GACTC,eAAgB,CACdC,UAAWC,KAAKC,MAChBC,OAAQ,QACRC,QAAShD,KAAKU,eAExB,kBACYuC,GACF,EAAV,4BACYL,UAAWC,KAAKC,MAChBC,OAAQ,QACRC,QAAS,EAArB,cAGQ,EAAR,mBAGIE,cA7BJ,aAqCIC,aArCJ,gBCnFqX,I,+ECSjXC,EAAY,eACd,EACAtD,EACAgB,GACA,EACA,KACA,WACA,MAIa,aAAAsC,EAAiB,QAMhC,IAAkBA,EAAW,CAACC,OAAA,KAAKC,OAAA,Q,kFC1BnC","file":"js/chunk-fd61deca.b508a1c4.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TicketDetails.vue?vue&type=style&index=0&id=45b278be&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.opened)?_c('v-row',[_c('v-col',{staticClass:\"profile\",attrs:{\"cols\":\"12\",\"lg\":\"6\"}},[_c('Profile',{attrs:{\"user\":_vm.currentUser}}),_c('Tariff',{attrs:{\"currentTariff\":_vm.currentTariff}})],1),_c('v-col',{staticClass:\"chat\",attrs:{\"cols\":\"12\",\"lg\":\"6\"}},[_c('Chat',{attrs:{\"ticket\":_vm.currentTicket,\"message\":_vm.messageBack},on:{\"update:message\":function($event){_vm.messageBack=$event}}})],1)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row v-if=\"opened\">\n    <v-col cols=\"12\" lg=\"6\" class=\"profile\">\n      <Profile :user=\"currentUser\" />\n      <Tariff :currentTariff=\"currentTariff\" />\n    </v-col>\n    <v-col cols=\"12\" lg=\"6\" class=\"chat\">\n      <Chat :ticket=\"currentTicket\" :message.sync=\"messageBack\" />\n      <!-- <v-simple-table>\n        <template v-slot:default>\n          <tbody>\n            <tr v-if=\"currentTicket.message\">\n              <td>\n                <v-icon color=\"primary\">$messageFrom</v-icon>\n              </td>\n              <td class=\"text--black\">{{ currentTicket.message }}</td>\n            </tr>\n            <tr\n              v-for=\"(item, index) in currentTicket.history\"\n              :key=\"index\"\n            >\n              <td>\n                <v-icon :color=\"color(item.emitor)\">\n                  {{ item.emitor !== 'admin'? '$messageFrom' : '$messageTo' }}\n                </v-icon>\n              </td>\n              <td>{{ item.message }}</td>\n            </tr>\n          </tbody>\n        </template>\n      </v-simple-table>\n      <v-card-text>\n        <v-text-field\n          v-model=\"messageBack\"\n          label=\"Send message back\"\n          append-outer-icon=\"$send\"\n          @click:append-outer=\"sendMessage\"\n        />\n      </v-card-text> -->\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport { mapState, mapGetters, mapMutations, mapActions } from 'vuex'\n\nexport default {\n  name: 'TicketDetails',\n  components: {\n    Profile: () => import('@/components/pages/tickets/Profile.vue'),\n    Chat: () => import('@/components/pages/tickets/Chat.vue'),\n    Tariff: () => import('@/components/pages/tickets/Tariff.vue')\n  },\n  props: ['id', 'type', 'opened'],\n\n  data: () => ({\n    messageBack: ''\n  }),\n\n  computed: {\n    ...mapState('address-requests', ['tickets']),\n    ...mapGetters(['getUserById']),\n    ...mapState('tariff', ['tariffs']),\n    currentTicket () {\n      return this.tickets.find(item => item._id === this.id)\n    },\n\n    currentTariff () {\n      const tariff = this.tariffs.find(item => item._id === this.currentTicket.tariffId)\n      return tariff || {}\n    },\n\n    currentUser () {\n      return this.getUserById(this.currentTicket.resellerId)\n    }\n  },\n\n  watch: {\n    messageBack (val) {\n      console.log(val)\n    }\n  },\n\n  methods: {\n    ...mapMutations('address-requests', {\n      updateTickets: 'TICKETS'\n    }),\n    ...mapActions('address-requests', {\n      sendMessageBack: 'SEND_MESSAGE_WITH_CURRENT_TICKET'\n    }),\n    color (emiter) {\n      return emiter === 'admin' ? '#333' : this.$vuetify.theme.themes.light.primary\n    },\n    sendMessage () {\n      this.sendMessageBack({\n        id: this.id,\n        historyElement: {\n          createdAt: Date.now(),\n          emitor: 'admin',\n          message: this.messageBack\n        }\n      }).then((response) => {\n        if (response) {\n          this.currentTicket.history.push({\n            createdAt: Date.now(),\n            emitor: 'admin',\n            message: this.messageBack\n          })\n        }\n        this.messageBack = ''\n      })\n    },\n    moveToArchive () {\n      //\n    },\n    // moveToTrash () {\n    //   const index = this.tickets.findIndex(item => item._id === this.currentTicket._id)\n    //   this.tickets.splice(index, 1)\n    //   index !== -1 && this.updateTickets()\n    // },\n    changeStatus () {\n      //\n    }\n  }\n}\n</script>\n\n<style scoped>\n.profile {\n  background: #eaeaea;\n}\n.chat {\n  border: solid 1px #999;\n  border-radius: 4px;\n  padding: 16px;\n}\n.tariff {\n  font-size: 12px!important;\n}\n</style>\n<style>\n.v-application--is-ltr .v-text-field .v-label {\n  font-size: 12px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TicketDetails.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TicketDetails.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TicketDetails.vue?vue&type=template&id=45b278be&scoped=true&\"\nimport script from \"./TicketDetails.vue?vue&type=script&lang=js&\"\nexport * from \"./TicketDetails.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TicketDetails.vue?vue&type=style&index=0&id=45b278be&scoped=true&lang=css&\"\nimport style1 from \"./TicketDetails.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45b278be\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCol,VRow})\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TicketDetails.vue?vue&type=style&index=1&lang=css&\""],"sourceRoot":""}